<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17613592905"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'AW-17613592905');
    </script>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>APR Transportes</title>

    <!-- Script para redirecionar URLs limpas para hash URLs -->
    <script>
      (function() {
        const path = window.location.pathname;
        if (path !== '/' && !window.location.hash) {
          window.location.replace('/#' + path);
        }
      })();
    </script>

    <link rel="stylesheet" href="/assets/custom.css">
    <script type="module" crossorigin src="/assets/index-De8GpY7Q.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-DeKwEobi.css">

    <!-- ✅ Estilos do banner (mostra a imagem inteira 1080x500) e remove fundo laranja abaixo -->
    <style>
      /* Fundo global neutro */
      html, body { background:#ffffff !important; }

      /* Banner principal: exibe a imagem por completo (sem corte) */
      [style*="image-004.jpg"],
      [style*="image-004-mobile.jpg"]{
        background-size: contain !important;   /* mostra 100% da imagem */
        background-position: center !important;
        background-repeat: no-repeat !important;
        background-color: #071b30 !important;  /* azul escuro de base para não aparecer “vazios” */
        width: 100%;
        height: 500px;                          /* altura fixa para 1080x500 */
        display: block;
      }

      /* Se houver seção imediatamente abaixo com fundo/gradiente, zera */
      [style*="image-004.jpg"] + *,
      [style*="image-004-mobile.jpg"] + *{
        background: transparent !important;
        background-image: none !important;
        background-color: transparent !important;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <!-- Tag canônica dinâmica -->
    <script>
      const baseUrl = 'https://www.aprtransportes.com.br';
      const canonicalUrl = baseUrl + window.location.pathname;

      let link = document.querySelector("link[rel='canonical']");
      if (!link) {
        link = document.createElement('link');
        link.rel = 'canonical';
        document.head.appendChild(link);
      }
      link.href = canonicalUrl;
    </script>

    <!-- Aplica imagem do banner e remove fundo laranja/gradiente abaixo -->
    <script>
      const isMobile = window.innerWidth <= 768;
      const targetImage = isMobile
        ? "url('/assets/image-004-mobile.jpg')"
        : "url('/assets/image-004.jpg')";

      const isOrangeBg = (cs) => {
        const bi = (cs.backgroundImage || '').toLowerCase();
        const bc = (cs.backgroundColor || '').toLowerCase();
        return (
          bi.includes('linear-gradient') ||
          bc.includes('ff6600') || bc.includes('255, 102, 0') ||
          bc.includes('rgba(255, 102, 0') || bc.includes('orange')
        );
      };

      const clearBg = (el) => {
        if (!el) return;
        const cs = getComputedStyle(el);
        if (isOrangeBg(cs)) {
          el.style.background = 'transparent';
          el.style.backgroundImage = 'none';
          el.style.backgroundColor = 'transparent';
        }
      };

      const applyBackgroundFix = () => {
        const banner = document.querySelector(
          '[style*="image-004.jpg"], [style*="image-004-mobile.jpg"]'
        );
        if (!banner) return;

        // Garante a imagem correta do banner e o estilo de exibição
        banner.style.backgroundImage = targetImage;
        banner.style.backgroundSize = 'contain';
        banner.style.backgroundPosition = 'center';
        banner.style.backgroundRepeat = 'no-repeat';
        banner.style.backgroundColor = '#071b30';
        banner.style.height = '500px';

        // Remove fundos laranja/gradiente de contêineres próximos
        clearBg(banner.nextElementSibling);
        clearBg(banner.parentElement);
        clearBg(banner.parentElement && banner.parentElement.nextElementSibling);
        clearBg(document.getElementById('root'));
        clearBg(document.body);

        observer.disconnect();
      };

      const observer = new MutationObserver(applyBackgroundFix);
      observer.observe(document.body, { childList: true, subtree: true });
      window.addEventListener('load', applyBackgroundFix);
      window.addEventListener('resize', applyBackgroundFix);
    </script>

    <!-- Script para redirecionar após envio do formulário -->
    <script>
      const observerForm = new MutationObserver(() => {
        const msg = [...document.querySelectorAll("div, p, span")]
          .find(el => el.textContent.includes("Obrigado"));
        if (msg) window.location.href = "/obrigado.html";
      });
      observerForm.observe(document.body, { childList: true, subtree: true });
    </script>
  </body>
</html>
