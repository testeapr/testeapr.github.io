<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17613592905"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-17613592905');
    </script>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>APR Transportes</title>

    <!-- Script para redirecionar URLs limpas para hash URLs -->
    <script>
      (function() {
        const path = window.location.pathname;
        if (path !== '/' && !window.location.hash) {
          window.location.replace('/#' + path);
        }
      })();
    </script>

    <link rel="stylesheet" href="/assets/custom.css">
    <script type="module" crossorigin src="/assets/index-De8GpY7Q.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-DeKwEobi.css">

    <!-- ✅ Estilo adicionado para corrigir o corte do banner -->
    <style>
      /* Ajuste visual e responsivo do banner */
      [style*="image-004.jpg"],
      [style*="image-004-mobile.jpg"] {
        background-size: cover !important;
        background-position: center !important;
        background-repeat: no-repeat !important;
        width: 100%;
        height: clamp(300px, 25vh, 420px); /* Altura ajustável */
        display: block;
      }

      /* Altura menor para mobile */
      @media (max-width: 768px) {
        [style*="image-004.jpg"],
        [style*="image-004-mobile.jpg"] {
          height: 260px;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <!-- Tag canônica dinâmica -->
    <script>
      const baseUrl = 'https://www.aprtransportes.com.br';
      const canonicalUrl = baseUrl + window.location.pathname;

      let link = document.querySelector("link[rel='canonical']");
      if (!link) {
        link = document.createElement('link');
        link.rel = 'canonical';
        document.head.appendChild(link);
      }
      link.href = canonicalUrl;
    </script>

    <!-- Script que aplica imagem do banner após renderização do React -->
    <script>
      const isMobile = window.innerWidth <= 768;
      const targetImage = isMobile
        ? "url('/assets/image-004-mobile.jpg')"
        : "url('/assets/image-004.jpg')";

      const applyBackgroundFix = () => {
        const bannerElement = document.querySelector(
          '[style*="image-004.jpg"], [style*="image-004-mobile.jpg"]'
        );
        if (bannerElement) {
          bannerElement.style.backgroundImage = targetImage;
          observer.disconnect();
        }
      };

      const observer = new MutationObserver(() => {
        applyBackgroundFix();
      });

      observer.observe(document.body, {
        childList: true,
        subtree: true,
      });

      window.addEventListener('load', () => {
        applyBackgroundFix();
      });
    </script>

    <!-- Script para redirecionar após envio do formulário -->
    <script>
      const observerForm = new MutationObserver(() => {
        const msg = [...document.querySelectorAll("div, p, span")]
          .find(el => el.textContent.includes("Obrigado"));
        if (msg) {
          window.location.href = "/obrigado.html";
        }
      });

      observerForm.observe(document.body, { childList: true, subtree: true });
    </script>
  </body>
</html>
